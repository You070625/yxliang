
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>LOVE</title>
<style>
  html,body{
    height:100%;margin:0;overflow:hidden;
    font-family:"微软雅黑",sans-serif;
    background:linear-gradient(180deg,#fef6f9 0%,#cbeeff 100%);
  }
  .stage{position:relative;width:100%;height:100%;overflow:hidden;}
  .flake{
    position:absolute;
    top:-10vh;
    padding:10px 18px;
    border-radius:20px;
    font-size:clamp(14px,2.8vmin,22px);
    color:#fff;
    font-weight:700;
    opacity:0;
    background:var(--bg);
    animation:fallAndSway var(--dur) ease-in-out var(--delay) forwards;
    box-shadow:0 5px 15px rgba(0,0,0,.25);
  }
  @keyframes fallAndSway{
    0%{opacity:0;transform:translateX(0) translateY(-10vh) rotate(var(--rot));}
    10%{opacity:1;}
    25%{transform:translateX(var(--x0)) translateY(15vh) rotate(calc(var(--rot) - 5deg));}
    50%{transform:translateX(var(--x1)) translateY(50vh) rotate(calc(var(--rot) + 5deg));}
    75%{transform:translateX(var(--x0)) translateY(80vh) rotate(calc(var(--rot) - 3deg));}
    90%{opacity:1;}
    100%{opacity:0;transform:translateX(var(--x1)) translateY(110vh) rotate(calc(var(--rot) + 10deg));}
  }
  .replay{
    position:absolute;right:18px;bottom:18px;
    padding:10px 14px;border:none;border-radius:10px;
    background:rgba(255,255,255,.4);backdrop-filter:blur(6px);
    color:#222;font-weight:600;cursor:pointer;
    box-shadow:0 4px 15px rgba(0,0,0,.2);
  }
  
  .finale{
    position:absolute;top:0;left:0;width:100%;height:100%;
    display:flex;align-items:center;justify-content:center;
    opacity:0;pointer-events:none;
  }
  .finale.show{opacity:1;}
  
  .collage{
    position:relative;
    width:100vw;
    height:100vh;
  }
  
  .collage-item{
    position:absolute;
    display:flex;align-items:center;justify-content:center;
    padding:clamp(8px,1.8vmin,15px);
    border-radius:clamp(8px,1.5vmin,12px);
    font-size:clamp(12px,2vmin,16px);
    font-weight:700;color:#fff;
    text-align:center;
    background:var(--bg);
    box-shadow:0 5px 15px rgba(0,0,0,.3);
    opacity:0;
    left:var(--finalX);
    top:var(--finalY);
    transform:translate(var(--fromX),var(--fromY)) rotate(var(--fromRot)) scale(0.3);
    z-index:var(--z);
    white-space:nowrap;
    max-width:clamp(80px,18vw,140px);
  }
  
  .collage-item.flyIn{
    animation:collageFlyIn 1.3s cubic-bezier(0.34,1.56,0.64,1) forwards;
  }
  
  @keyframes collageFlyIn{
    0%{
      opacity:0;
      transform:translate(var(--fromX),var(--fromY)) rotate(var(--fromRot)) scale(0.3);
    }
    50%{
      opacity:1;
    }
    100%{
      opacity:0.95;
      transform:translate(0,0) rotate(var(--finalRot)) scale(1);
    }
  }
  
  .confession{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    display:flex;
    gap:clamp(10px,2vmin,20px);
    opacity:0;
    z-index:9999;
  }
  
  .confession.show{
    opacity:1;
  }
  
  .char-card{
    display:flex;
    align-items:center;
    justify-content:center;
    width:clamp(60px,15vmin,120px);
    height:clamp(70px,17vmin,140px);
    border-radius:clamp(12px,3vmin,20px);
    font-size:clamp(40px,12vmin,90px);
    font-weight:900;
    color:#fff;
    background:var(--cardBg);
    box-shadow:0 10px 40px rgba(0,0,0,.3),
               0 0 60px rgba(255,107,157,.6);
    transform:scale(0) rotate(var(--fromRot));
    opacity:0;
  }
  
  .char-card.pop{
    animation:cardPop 0.8s cubic-bezier(0.68,-0.55,0.265,1.55) forwards;
  }
  
  @keyframes cardPop{
    0%{
      opacity:0;
      transform:scale(0) rotate(var(--fromRot)) translateY(-100vh);
    }
    60%{
      opacity:1;
      transform:scale(1.2) rotate(15deg) translateY(0);
    }
    80%{
      transform:scale(0.9) rotate(-5deg) translateY(0);
    }
    100%{
      opacity:1;
      transform:scale(1) rotate(0deg) translateY(0);
    }
  }
  
  @keyframes explodeOut{
    to{
      opacity:0;
      transform:translate(var(--explodeX),var(--explodeY)) rotate(var(--explodeRot)) scale(0.2);
    }
  }
  
  .transition{
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:radial-gradient(circle at center,
                rgba(255,107,157,.95) 0%,
                rgba(255,140,180,.85) 30%,
                rgba(255,180,200,.7) 60%,
                transparent 100%);
    opacity:0;
    z-index:9998;
    pointer-events:none;
  }
  
  .transition.flash{
    animation:flashTransition 1.2s ease-out forwards;
  }
  
  @keyframes flashTransition{
    0%{
      opacity:0;
      transform:scale(0.5);
    }
    40%{
      opacity:1;
      transform:scale(2);
    }
    100%{
      opacity:0;
      transform:scale(3);
    }
  }
</style>
</head>
<body>
  <div class="stage" id="stage"></div>
  <div class="finale" id="finale">
    <div class="collage" id="collage"></div>
    <div class="transition" id="transition"></div>
    <div class="confession" id="confession"></div>
  </div>
  <button class="replay" id="replay">重放</button>

<script>
const tips=[
  '今天也要开心','早点休息','多喝热水','抱抱你','路上注意安全',
  '加油未来可期','温柔对自己','相信光','小幸运在路上','愿你平安喜乐',
  '别熬夜啦','微笑面对一切','你已经很棒了','保持热爱','我会一直在',
  '世界在你眼前','慢慢来不着急','给自己一个拥抱','每天都是新的开始',
  '要好好吃饭哦','记得想我','遇见更好的自己','做自己的小太阳',
  '星星会说话','爱你所爱','今天也很爱你','世界因你而美好',
  '保持善良','永远年轻','一切都会好的','温柔且坚定','你值得被爱',
  '慢慢变好','往前走别回头','风会带来好消息','幸福正在路上',
  '别担心','勇敢一点','带着微笑出发','万事胜意','心怀感恩',
  '愿你被世界温柔以待','做个快乐的人','好运会降临','人间值得',
  '保持松弛感','一步一个脚印','相信自己','笑口常开','岁月静好'
];

const palettes=[
  ['#ff758c','#ff7eb3'],['#a18cd1','#fbc2eb'],['#f6d365','#fda085'],
  ['#84fab0','#8fd3f4'],['#f093fb','#f5576c'],['#4facfe','#00f2fe'],
  ['#43e97b','#38f9d7'],['#fa709a','#fee140'],['#30cfd0','#330867']
];

const stage=document.getElementById('stage');
const finale=document.getElementById('finale');
const collage=document.getElementById('collage');
const transition=document.getElementById('transition');
const confession=document.getElementById('confession');
const replay=document.getElementById('replay');

const confessionTexts=['我好想你','我喜欢你','超级喜欢你','想你了','爱你呀'];

function rand(min,max){return Math.random()*(max-min)+min;}
function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
function gradient(){const [a,b]=pick(palettes);return `linear-gradient(135deg,${a},${b})`;}

function createFlake(i){
  const el=document.createElement('div');
  el.className='flake';
  el.textContent=tips[i%tips.length];
  const x=rand(5,95);
  const dur=rand(7,10);
  const delay=i*0.25+rand(0,0.3);
  const amp=rand(15,30);
  el.style.left=x+'vw';
  el.style.setProperty('--dur',dur+'s');
  el.style.setProperty('--delay',delay+'s');
  el.style.setProperty('--rot',rand(-15,15)+'deg');
  el.style.setProperty('--x0',-amp+'px');
  el.style.setProperty('--x1',amp+'px');
  el.style.setProperty('--bg',gradient());
  el.addEventListener('animationend',e=>{if(e.animationName==='fallAndSway')el.remove();});
  stage.appendChild(el);
}

function showFinale(){
  finale.classList.add('show');
  collage.innerHTML='';
  
  // 使用所有50条文字
  const allTexts=tips;
  const count=allTexts.length;
  
  const items=[];
  allTexts.forEach((text,i)=>{
    const item=document.createElement('div');
    item.className='collage-item';
    item.textContent=text;
    item.style.setProperty('--bg',gradient());
    
    // 动态生成不规则的位置（充分分散在整个画布上，包括边缘）
    const x=rand(-5,90)+'%';
    const y=rand(-5,90)+'%';
    const rot=rand(-30,30)+'deg';
    const z=Math.floor(rand(1,count));
    
    item.style.setProperty('--finalX',x);
    item.style.setProperty('--finalY',y);
    item.style.setProperty('--finalRot',rot);
    item.style.setProperty('--z',z);
    
    // 从四面八方随机飞入
    const directions=['top','bottom','left','right','topLeft','topRight','bottomLeft','bottomRight'];
    const dir=pick(directions);
    let fromX,fromY,fromRot;
    
    switch(dir){
      case 'top':
        fromX='0vw';fromY='-180vh';fromRot=rand(360,720)+'deg';break;
      case 'bottom':
        fromX='0vw';fromY='180vh';fromRot=rand(-720,-360)+'deg';break;
      case 'left':
        fromX='-180vw';fromY='0vh';fromRot=rand(-540,-180)+'deg';break;
      case 'right':
        fromX='180vw';fromY='0vh';fromRot=rand(540,900)+'deg';break;
      case 'topLeft':
        fromX='-150vw';fromY='-150vh';fromRot=rand(-900,-540)+'deg';break;
      case 'topRight':
        fromX='150vw';fromY='-150vh';fromRot=rand(720,1080)+'deg';break;
      case 'bottomLeft':
        fromX='-150vw';fromY='150vh';fromRot=rand(-1080,-720)+'deg';break;
      case 'bottomRight':
        fromX='150vw';fromY='150vh';fromRot=rand(900,1440)+'deg';break;
    }
    
    item.style.setProperty('--fromX',fromX);
    item.style.setProperty('--fromY',fromY);
    item.style.setProperty('--fromRot',fromRot);
    
    collage.appendChild(item);
    items.push(item);
  });
  
  // 文字块快速连续飞入汇集
  items.forEach((item,i)=>{
    setTimeout(()=>{
      item.classList.add('flyIn');
    },i*60);
  });
  
  const flyInDuration=items.length*60+1300;
  
  // 停留2.5秒后，文字爆炸散开
  setTimeout(()=>{
    items.forEach(item=>{
      const explodeAngle=Math.random()*Math.PI*2;
      const explodeDist=rand(150,300);
      const explodeX=Math.cos(explodeAngle)*explodeDist+'vw';
      const explodeY=Math.sin(explodeAngle)*explodeDist+'vh';
      const explodeRot=rand(-720,720)+'deg';
      
      item.style.setProperty('--explodeX',explodeX);
      item.style.setProperty('--explodeY',explodeY);
      item.style.setProperty('--explodeRot',explodeRot);
      item.style.animation='explodeOut 0.8s ease-in forwards';
    });
    
    // 爆炸后0.3秒，触发粉色闪光转场
    setTimeout(()=>{
      transition.classList.add('flash');
    },300);
    
    // 转场动画中间时刻（0.5秒），表白文字卡片弹出
    setTimeout(()=>{
      const text=pick(confessionTexts);
      confession.innerHTML='';
      confession.classList.add('show');
      
      // 把文字拆成单个字符，每个字符一个卡片
      const chars=text.split('');
      chars.forEach((char,i)=>{
        const card=document.createElement('div');
        card.className='char-card';
        card.textContent=char;
        card.style.setProperty('--cardBg',gradient());
        card.style.setProperty('--fromRot',rand(-360,360)+'deg');
        confession.appendChild(card);
        
        // 字符卡片依次弹出
        setTimeout(()=>{
          card.classList.add('pop');
        },i*150);
      });
    },800);
  },flyInDuration+2500);
  
  // 表白文字卡片停留3秒后淡出
  setTimeout(()=>{
    const cards=confession.querySelectorAll('.char-card');
    cards.forEach((card,i)=>{
      setTimeout(()=>{
        card.style.animation='fadeOut 1s ease-out forwards';
      },i*80);
    });
  },flyInDuration+2500+800+3000);
  
  // 完全结束
  setTimeout(()=>{
    finale.classList.remove('show');
    collage.innerHTML='';
    transition.className='transition';
    confession.className='confession';
    confession.innerHTML='';
  },flyInDuration+2500+800+3000+1500);
}

function play(){
  stage.innerHTML='';
  finale.classList.remove('show');
  collage.innerHTML='';
  transition.className='transition';
  confession.className='confession';
  confession.innerHTML='';
  
  const style=document.createElement('style');
  style.textContent='@keyframes fadeOut{to{opacity:0;transform:scale(0.8) rotate(calc(var(--finalRot) + 45deg));}}';
  if(!document.getElementById('fadeOutStyle')){
    style.id='fadeOutStyle';
    document.head.appendChild(style);
  }
  
  for(let i=0;i<15;i++) createFlake(i);
  
  setTimeout(showFinale,10500);
}

replay.onclick=play;
play();
</script>
</body>
</html>
